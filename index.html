<html><head><base href="https://websim.aidungeon.io/%E8%83%8C%E6%99%AF%E6%94%B9%E7%82%BA%E9%82%84%E8%B3%8A%E5%9C%96%E7%89%87%EF%BC%8C%E5%8F%AA%E6%9B%B4%E5%8B%95%E8%83%8C%E6%99%AF%EF%BC%8C%E5%85%B6%E9%A4%98%E4%B8%8D%E6%9B%B4%E5%8B%95">
<meta charset="utf-8">
<title>動態藍光科技線性回歸模擬器 - 金幣版 (海賊背景)</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Audiowide&family=Orbitron:wght@400;700&display=swap');

:root {
    --primary-color: #00a2ff;
    --secondary-color: #0066cc;
    --background-color: rgba(0, 8, 16, 0.7);
    --text-color: #e0f0ff;
    --gold-color: #ffd700;
}

body {
    font-family: 'Orbitron', sans-serif;
    line-height: 1.6;
    padding: 20px;
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    background-image: url('https://images.unsplash.com/photo-1534447677768-be436bb09401?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1771&q=80');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
}

h1, h2 {
    font-family: 'Audiowide', cursive;
    color: var(--primary-color);
    text-align: center;
    text-shadow: 0 0 10px rgba(0, 162, 255, 0.5), 0 0 20px rgba(0, 162, 255, 0.3);
}

.container {
    display: flex;
    justify-content: space-between;
    width: 100%;
    max-width: 1200px;
}

.sidebar, .main-content {
    background-color: var(--background-color);
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0, 162, 255, 0.2), inset 0 0 10px rgba(0, 162, 255, 0.1);
    backdrop-filter: blur(5px);
}

.sidebar {
    width: 25%;
    padding: 20px;
}

.main-content {
    width: 70%;
    padding: 20px;
}

.slider {
    width: 100%;
    margin: 10px 0;
    -webkit-appearance: none;
    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    outline: none;
    opacity: 0.7;
    transition: all 0.3s;
    border-radius: 5px;
    height: 5px;
}

.slider:hover {
    opacity: 1;
    box-shadow: 0 0 10px rgba(0, 162, 255, 0.5);
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: var(--primary-color);
    cursor: pointer;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(0, 162, 255, 0.8);
}

.slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: var(--primary-color);
    cursor: pointer;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(0, 162, 255, 0.8);
}

#plot {
    width: 100%;
    height: 400px;
    border: 2px solid var(--primary-color);
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0, 162, 255, 0.3);
}

.info {
    margin-top: 20px;
    padding: 15px;
    background-color: rgba(0, 30, 60, 0.6);
    border-radius: 10px;
    border: 1px solid var(--primary-color);
    box-shadow: 0 0 10px rgba(0, 162, 255, 0.2), inset 0 0 5px rgba(0, 162, 255, 0.1);
}

.parameter {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

input[type="number"] {
    background-color: rgba(0, 30, 60, 0.6);
    border: 1px solid var(--primary-color);
    color: var(--primary-color);
    padding: 5px;
    border-radius: 5px;
    font-family: 'Orbitron', sans-serif;
    transition: all 0.3s;
}

input[type="number"]:focus {
    outline: none;
    box-shadow: 0 0 10px rgba(0, 162, 255, 0.5);
}

.glow {
    animation: glow 2.5s ease-in-out infinite alternate;
}

@keyframes glow {
    from {
        text-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color), 0 0 15px var(--primary-color), 0 0 20px var(--primary-color);
    }
    to {
        text-shadow: 0 0 10px var(--secondary-color), 0 0 20px var(--secondary-color), 0 0 30px var(--secondary-color), 0 0 40px var(--secondary-color);
    }
}

</style>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1 class="glow">動態藍光科技線性回歸模擬器 - 金幣版 (海賊背景)</h1>
    <div class="container">
        <div class="sidebar">
            <h2>參數設置</h2>
            <div class="parameter">
                <label for="slope">斜率 (a):</label>
                <input type="number" id="slopeInput" min="-50" max="50" value="1" step="0.1">
            </div>
            <input type="range" id="slope" class="slider" min="-50" max="50" value="1" step="0.1">
            
            <div class="parameter">
                <label for="intercept">截距 (b):</label>
                <input type="number" id="interceptInput" min="-50" max="50" value="5" step="0.1">
            </div>
            <input type="range" id="intercept" class="slider" min="-50" max="50" value="5" step="0.1">
            
            <div class="parameter">
                <label for="points">金幣數量 (n):</label>
                <input type="number" id="pointsInput" min="100" max="1000" value="500" step="10">
            </div>
            <input type="range" id="points" class="slider" min="100" max="1000" value="500" step="10">
            
            <div class="parameter">
                <label for="noise">市場波動 (c):</label>
                <input type="number" id="noiseInput" min="10" max="100" value="20" step="1">
            </div>
            <input type="range" id="noise" class="slider" min="10" max="100" value="20" step="1">
        </div>
        <div class="main-content">
            <div id="plot"></div>
            <div class="info">
                <h3>模型信息</h3>
                <p>實際斜率 (a): <span id="trueSlope" class="glow"></span></p>
                <p>估計斜率: <span id="estimatedSlope" class="glow"></span></p>
                <p>實際截距 (b): <span id="trueIntercept" class="glow"></span></p>
                <p>估計截距: <span id="estimatedIntercept" class="glow"></span></p>
                <p>金幣數量: <span id="numPoints" class="glow"></span></p>
                <p>市場波動 (c): <span id="noiseFactor" class="glow"></span></p>
            </div>
        </div>
    </div>

<script>
function generateData(n, a, b, c) {
    let x = Array.from({length: n}, () => Math.random() * 9 + 1);
    let noise = Array.from({length: n}, () => Math.random() * 2 - 1);
    let y = x.map((xi, i) => a * xi + b + c * noise[i]);
    return [x, y];
}

function linearRegression(x, y) {
    let n = x.length;
    let sum_x = x.reduce((a, b) => a + b, 0);
    let sum_y = y.reduce((a, b) => a + b, 0);
    let sum_xy = x.reduce((a, b, i) => a + b * y[i], 0);
    let sum_xx = x.reduce((a, b) => a + b * b, 0);
    
    let slope = (n * sum_xy - sum_x * sum_y) / (n * sum_xx - sum_x * sum_x);
    let intercept = (sum_y - slope * sum_x) / n;
    
    return [slope, intercept];
}

function updatePlot() {
    let a = parseFloat(document.getElementById('slope').value);
    let b = parseFloat(document.getElementById('intercept').value);
    let n = parseInt(document.getElementById('points').value);
    let c = parseFloat(document.getElementById('noise').value);

    let [x, y] = generateData(n, a, b, c);
    let [estimatedSlope, estimatedIntercept] = linearRegression(x, y);

    let trace1 = {
        x: x,
        y: y,
        mode: 'markers',
        type: 'scatter',
        name: '金幣',
        marker: {
            color: '#ffd700',
            size: 10,
            symbol: 'circle',
            line: {
                color: '#daa520',
                width: 2
            },
            opacity: 0.8
        }
    };

    let trace2 = {
        x: [Math.min(...x), Math.max(...x)],
        y: [estimatedSlope * Math.min(...x) + estimatedIntercept, 
            estimatedSlope * Math.max(...x) + estimatedIntercept],
        mode: 'lines',
        type: 'scatter',
        name: '回歸線',
        line: {
            color: '#e0f0ff',
            width: 3,
            dash: 'dash'
        }
    };

    let layout = {
        title: {
            text: '金幣分布與市場趨勢',
            font: {
                family: 'Audiowide',
                size: 24,
                color: '#00a2ff'
            }
        },
        xaxis: {
            title: '時間',
            gridcolor: '#1a3a5a',
            zerolinecolor: '#3a6a9a',
            tickfont: {color: '#e0f0ff'},
            titlefont: {color: '#00a2ff'}
        },
        yaxis: {
            title: '價值',
            gridcolor: '#1a3a5a',
            zerolinecolor: '#3a6a9a',
            tickfont: {color: '#e0f0ff'},
            titlefont: {color: '#00a2ff'}
        },
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: 'rgba(0,20,40,0.5)',
        showlegend: false,
        annotations: [{
            xref: 'paper',
            yref: 'paper',
            x: 0.5,
            y: -0.15,
            text: '金融數據分析中...',
            showarrow: false,
            font: {
                family: 'Orbitron',
                size: 14,
                color: '#00a2ff'
            }
        }]
    };

    Plotly.react('plot', [trace1, trace2], layout);

    document.getElementById('trueSlope').textContent = a.toFixed(2);
    document.getElementById('estimatedSlope').textContent = estimatedSlope.toFixed(2);
    document.getElementById('trueIntercept').textContent = b.toFixed(2);
    document.getElementById('estimatedIntercept').textContent = estimatedIntercept.toFixed(2);
    document.getElementById('numPoints').textContent = n;
    document.getElementById('noiseFactor').textContent = c.toFixed(2);
}

function syncInputs(slider, input) {
    slider.addEventListener('input', function() {
        input.value = this.value;
        updatePlot();
    });
    input.addEventListener('input', function() {
        slider.value = this.value;
        updatePlot();
    });
}

syncInputs(document.getElementById('slope'), document.getElementById('slopeInput'));
syncInputs(document.getElementById('intercept'), document.getElementById('interceptInput'));
syncInputs(document.getElementById('points'), document.getElementById('pointsInput'));
syncInputs(document.getElementById('noise'), document.getElementById('noiseInput'));

updatePlot();

// 添加動態色彩效果
function shiftColor(color, phase) {
    let r = parseInt(color.slice(1,3), 16);
    let g = parseInt(color.slice(3,5), 16);
    let b = parseInt(color.slice(5,7), 16);
    
    r = Math.sin(phase) * 32 + 128;
    g = Math.sin(phase + 2) * 32 + 128;
    b = Math.sin(phase + 4) * 32 + 255;
    
    return '#' + Math.round(r).toString(16).padStart(2,'0') + 
                 Math.round(g).toString(16).padStart(2,'0') + 
                 Math.round(b).toString(16).padStart(2,'0');
}

let phase = 0;
setInterval(() => {
    phase += 0.05;
    let newColor = shiftColor('#00a2ff', phase);
    document.documentElement.style.setProperty('--primary-color', newColor);
    
    let glowElements = document.querySelectorAll('.glow');
    glowElements.forEach(el => {
        el.style.textShadow = `0 0 ${Math.random() * 10 + 5}px ${newColor}`;
    });
}, 50);
</script>
</body></html>